<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>収入登録</title>
    <link
      rel="stylesheet"
      th:href="@{/css/financial-form.css}"
      href="/css/financial-form.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>
  <body>
    <main class="container">
      <div class="header-nav">
        <div class="header-top">
          <div>
            <p class="page-subtitle">Income Form</p>
            <h1>収入の登録</h1>
            <p class="description">新しい収入を記録してください。</p>
          </div>
          <nav class="nav-links">
            <a href="/" class="nav-btn">一覧へ戻る</a>
            <a href="/expense/new" class="nav-btn">支出登録へ</a>
          </nav>
        </div>
      </div>

      <section class="form-card">
        <form
          th:action="@{/income}"
          th:object="${incomeForm}"
          method="post"
          class="form"
        >
          <div class="form-group">
            <label for="amount">金額 (円)</label>
            <input
              type="number"
              id="amount"
              th:field="*{amount}"
              min="1"
              step="1"
              placeholder="0"
              required
            />
            <p
              class="text-error"
              th:if="${#fields.hasErrors('amount')}"
              th:errors="*{amount}"
            ></p>
          </div>

          <div class="form-group">
            <label for="recordedAt">記録日</label>
            <input
              type="date"
              id="recordedAt"
              th:field="*{recordedAt}"
              required
            />
            <p
              class="text-error"
              th:if="${#fields.hasErrors('recordedAt')}"
              th:errors="*{recordedAt}"
            ></p>
          </div>

          <div class="form-group">
            <label>カテゴリ</label>
            <div class="category-picker" role="radiogroup" aria-required="true">
              <button
                type="button"
                th:each="cat, stat : ${incomeCategories}"
                class="cat-btn"
                th:classappend="'color-' + ${stat.index % 10}"
                th:data-value="${cat.name()}"
                aria-checked="false"
              >
                <span class="cat-icon" th:text="${cat.icon}"></span>
                <span class="cat-label" th:text="${cat.label}"></span>
              </button>
            </div>
            <input
              type="hidden"
              id="category"
              th:field="*{category}"
              required
            />
            <p
              class="text-error"
              th:if="${#fields.hasErrors('category')}"
              th:errors="*{category}"
            ></p>
          </div>

          <div class="form-group">
            <label for="note">メモ</label>
            <textarea
              id="note"
              th:field="*{note}"
              rows="3"
              placeholder="必要に応じてメモを残してください"
            ></textarea>
            <p
              class="text-error"
              th:if="${#fields.hasErrors('note')}"
              th:errors="*{note}"
            ></p>
          </div>

          <div class="actions">
            <button type="submit">登録する</button>
          </div>
        </form>
      </section>
    </main>

    <script src="/javascript/financial-form.js"></script>
  </body>
</html>
